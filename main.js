(()=>{const t=document.querySelector("[data-lists]"),e=document.querySelector("[data-new-list-form"),n=document.querySelector("[data-new-list-input]"),a="tasks.lists",l=document.querySelector("[data-list-display-container"),i="task.selectedListId",s=document.querySelector("[data-delete-list-button]"),o=document.querySelector("[data-list-title"),d=document.querySelector("[data-list-count"),c=document.querySelector("[data-tasks]"),r=document.querySelector("#task-template"),u=document.querySelector("[data-new-task-form]"),m=document.querySelector("[data-new-task-input]"),f=document.querySelector("[data-clear-complete-task-button]");let p=JSON.parse(localStorage.getItem(a))||[],k=localStorage.getItem(i);function S(){y(),g()}function y(){localStorage.setItem(a,JSON.stringify(p)),localStorage.setItem(i,k)}function g(){q(t),p.forEach((e=>{const n=document.createElement("li");n.dataset.listId=e.id,n.classList.add("list-name"),n.textContent=e.name,e.id===k&&n.classList.add("active-list"),t.appendChild(n)}));const e=p.find((t=>t.id===k));null==k?l.style.display="none":(l.style.display="",o.innerText=e.name,v(e),q(c),function(t){t.tasks.forEach((t=>{const e=document.importNode(r.content,!0),n=e.querySelector("input");n.id=t.id,n.checked=t.complete;const a=e.querySelector("label");a.htmlFor=t.id,a.append(t.name),c.appendChild(e)}))}(e))}function v(t){const e=t.tasks.filter((t=>!t.complete)).length,n=1===e?"task":"tasks";d.innerText=`${e} ${n} remaining!`}function q(t){for(;t.firstChild;)t.removeChild(t.firstChild)}s.addEventListener("click",(t=>{p=p.filter((t=>t.id!==k)),k=null,S()})),t.addEventListener("click",(t=>{"li"===t.target.tagName.toLowerCase()&&(k=t.target.dataset.listId,S())})),c.addEventListener("click",(t=>{if("input"===t.target.tagName.toLowerCase()){const e=p.find((t=>t.id===k));e.tasks.find((e=>e.id===t.target.id)).complete=t.target.checked,y(),v(e)}})),e.addEventListener("submit",(t=>{t.preventDefault();const e=n.value;if(null==e||""===e)return;const a=(l=e,{id:Date.now().toString(),name:l,tasks:[]});var l;n.value=null,p.push(a),S()})),u.addEventListener("submit",(t=>{t.preventDefault();const e=m.value;if(null==e||""===e)return;const n=(a=e,{id:Date.now().toString(),name:a,complete:!1});var a;m.value=null,p.find((t=>t.id===k)).tasks.push(n),S()})),f.addEventListener("click",(t=>{const e=p.find((t=>t.id===k));e.tasks=e.tasks.filter((t=>!t.complete)),S()})),g()})();